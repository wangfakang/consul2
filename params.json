{"name":"Consul2","tagline":"nginx/tengine using consul for service discover  ","body":"\r\n```\r\n利用tengine的dynamic_upstream模块结合consul的service_discover\r\n```\r\n\r\n\r\n目前问题:    \r\n====\r\n   在nginx中的upstream server中无法配置自己consul中搭建的域名.以至于无法nginx启动.\r\n问题原因:\r\n======\r\n   由于在进行启动nginx的时候,nginx进行配置文件解析到upstream中的server指令的时候无法识  \r\n   别自己配置的域名(是在consul中注册的)即调用gethostbyname时返回值是空的.此时nginx是不允许启动的．\r\n   \r\n问题解决：　　　\r\n===   \r\n最简单的解决方法就是在自己的/etc/host文件下加上一个ｄｏｍａｉｎ－－ｉｐ映射来解决．\r\n\r\n机制原理:\r\n======\r\n  该系统主要利用tengine中的upstream模块的dynamic_upstream块的动态域名解析模块的功能.即使用resolver     \r\n  进行配置consul的dns server ip以及port,进行相关的域名解析，而consul自身的服务发现提供dns接口.\r\n\r\n\r\n\r\n\r\n\r\n\r\n## 有问题反馈\r\n在使用中有任何问题，欢迎反馈给我，可以用以下联系方式跟我交流\r\n\r\n* 邮件(1031379296#qq.com, 把#换成@)\r\n* QQ: 1031379296\r\n* weibo: [@王发康](http://weibo.com/u/2786211992/home)\r\n\r\n\r\n## 感激\r\n\r\n### chunshengsterATgmail.com\r\n\r\n\r\n## 关于作者\r\n\r\n### Linux\\nginx\\golang\\c\\c++爱好者\r\n### 欢迎一起交流  一起学习# \r\n","google":"tengine  dynamic_upstream consul  dns","note":"Don't delete this file! It's used internally to help with page regeneration."}